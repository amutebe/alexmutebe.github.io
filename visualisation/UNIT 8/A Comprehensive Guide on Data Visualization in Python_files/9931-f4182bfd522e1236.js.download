"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9931],{18058:function(e,n,t){t.d(n,{M:function(){return l}});var r=t(43119);function i(){var e=(0,r.Z)(["\n  fragment PostsFeedNavTag on Tag {\n    id\n    isOfficial\n  }\n"]);return i=function(){return e},e}var l=(0,t(71440).Ps)(i())},79566:function(e,n,t){t.d(n,{b:function(){return a}});var r=t(43119),i=t(71440),l=t(3839);function o(){var e=(0,r.Z)(["\n  fragment ReplPostRecentCommentUser on User {\n    id\n    username\n    image\n    ...UserLinkUser\n  }\n  ","\n"]);return o=function(){return e},e}var a=(0,i.Ps)(o(),l._)},7958:function(e,n,t){t.d(n,{n:function(){return c}});var r=t(43119),i=t(71440),l=t(75834),o=t(63900),a=t(94712),s=t(18058);function u(){var e=(0,r.Z)(["\n  fragment ReplPostReplCardRepl on Repl {\n    id\n    iconUrl\n    description(plainText: true)\n    ...ReplPostReplInfoRepl\n    ...ReplStatsRepl\n    ...ReplLinkRepl\n    tags {\n      id\n      ...PostsFeedNavTag\n    }\n    owner {\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var c=(0,i.Ps)(u(),l.Zs,o.T,a.Y,s.M)},75834:function(e,n,t){t.d(n,{Gz:function(){return g},U5:function(){return w},Zs:function(){return m},f_:function(){return R},rP:function(){return Z}});var r=t(43119),i=t(71440),l=t(27849),o=t(3768),a=t(17864),s=t(63900),u=t(18058),c=t(79566);function d(){var e=(0,r.Z)(["\n  fragment ReplPostReplInfoRepl on Repl {\n    id\n    title\n    description(plainText: true)\n    imageUrl\n    iconUrl\n    templateInfo {\n      label\n      iconUrl\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,r.Z)(["\n  fragment ReplPostRepl on Repl {\n    id\n    ...ReplPostReplInfoRepl\n    ...LikeButtonRepl\n    ...ReplStatsRepl\n    tags {\n      id\n      ...PostsFeedNavTag\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,r.Z)(["\n  fragment ReplPostReplComment on ReplComment {\n    id\n    body\n    timeCreated\n    user {\n      id\n      ...ReplPostRecentCommentUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function v(){var e=(0,r.Z)(["\n  fragment ReplPostPost on Post {\n    id\n    title\n    timeCreated\n    isPinned\n    isAnnouncement\n    ...ReplViewPostActionPermissions\n    replComment {\n      id\n      body(removeMarkdown: true)\n    }\n    repl {\n      id\n      ...ReplViewReplActionsPermissions\n      ...ReplPostRepl\n    }\n    user {\n      id\n      ...ReplPostUserPostUser\n    }\n    recentReplComments {\n      id\n      ...ReplPostReplComment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function h(){var e=(0,r.Z)(["\n  fragment ReplPostCurrentUser on CurrentUser {\n    id\n    isModerator: hasRole(role: MODERATOR)\n    isAdmin: hasRole(role: ADMIN)\n    ...LikeButtonCurrentUser\n  }\n  ","\n"]);return h=function(){return e},e}var m=(0,i.Ps)(d()),R=(0,i.Ps)(p(),m,a.R7,s.T,u.M),g=(0,i.Ps)(f(),c.b),w=(0,i.Ps)(v(),l.K4,l.jN,R,o.n,g),Z=(0,i.Ps)(h(),a.wO)},63900:function(e,n,t){t.d(n,{T:function(){return l}});var r=t(43119);function i(){var e=(0,r.Z)(["\n  fragment ReplStatsRepl on Repl {\n    id\n    likeCount\n    runCount\n    commentCount\n  }\n"]);return i=function(){return e},e}var l=(0,t(71440).Ps)(i())},3768:function(e,n,t){t.d(n,{n:function(){return a}});var r=t(43119),i=t(71440),l=t(3839);function o(){var e=(0,r.Z)(["\n  fragment ReplPostUserPostUser on User {\n    id\n    username\n    image\n    ...UserLinkUser\n  }\n  ","\n"]);return o=function(){return e},e}var a=(0,i.Ps)(o(),l._)},37459:function(e,n,t){t.d(n,{B5:function(){return g},Cn:function(){return Z},Zd:function(){return R}});var r=t(72006),i=t(43119),l=t(71440),o=t(7958),a=t(94712),s=t(37044),u=t(79908),c=t(37993),d=t(15250),p=t(48017);function f(){var e=(0,i.Z)(["\n  fragment ReplViewRepl on Repl {\n    id\n    title\n    timeCreated\n    imageUrl\n    analyticsUrl\n    releasesForkCount\n    publicForkCount\n    examples {\n      id\n      ...ReplPostReplCardRepl\n    }\n    owner {\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n    }\n    relatedRepls(limitPerGroup: 3) {\n      name\n      repls {\n        id\n        publishedAs\n        ...ReplLinkRepl\n        ...TemplateReplCardRepl\n        ...ReplPostReplCardRepl\n      }\n    }\n    lang {\n      id\n      displayName\n    }\n    currentUserPermissions {\n      containerWrite\n      publish\n      changeIconUrl\n    }\n    publishedAs\n    deployment {\n      id\n      activeRelease {\n        id\n        timeCreated\n      }\n    }\n    ...ReplViewReplTitleRepl\n    ...ReplViewReplViewerRepl\n    ...ReplLinkRepl\n    ...ReplViewFooterRepl\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return f=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment ReplViewCurrentUser on CurrentUser {\n    id\n    username\n    isSubscribed\n    isModerator: hasRole(role: MODERATOR)\n    isAdmin: hasRole(role: ADMIN)\n    ...ReplViewReplViewerCurrentUser\n  }\n  ","\n"]);return v=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation ReplViewSetReplExamples($input: SetReplExamplesInput!) {\n    setReplExamples(input: $input) {\n      ... on Repl {\n        id\n        examples {\n          id\n          ...ReplPostReplCardRepl\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var m={},R=(0,l.Ps)(f(),o.n,a.Y,s.qb,u.rv,c.Q,d.A),g=(0,l.Ps)(v(),c.r),w=(0,l.Ps)(h(),o.n);function Z(e){var n=(0,r.Z)({},m,e);return p.D(w,n)}},15250:function(e,n,t){t.d(n,{A:function(){return u}});var r=t(43119),i=t(71440),l=t(94712);function o(){var e=(0,r.Z)(["\n  fragment ReplViewSourceRepl on Repl {\n    id\n    iconUrl\n    title\n    templateLabel\n    ...ReplLinkRepl\n    owner {\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n  ","\n"]);return o=function(){return e},e}function a(){var e=(0,r.Z)(["\n  fragment ReplViewFooterRepl on Repl {\n    id\n    description\n    lastPublishedAt\n    timeCreated\n    publishedAs\n    runCount\n    deployment {\n      id\n      activeRelease {\n        id\n        timeCreated\n      }\n    }\n    owner {\n      ... on Team {\n        id\n        username\n        url\n        image\n        followerCount\n        isFollowedByCurrentUser\n      }\n      ... on User {\n        id\n        username\n        url\n        image\n        followerCount\n        isFollowedByCurrentUser\n      }\n    }\n    source {\n      release {\n        id\n      }\n      deployment {\n        id\n        repl {\n          id\n          ...ReplViewSourceRepl\n        }\n      }\n    }\n    tags {\n      id\n    }\n    origin {\n      id\n      ...ReplViewSourceRepl\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var s=(0,i.Ps)(o(),l.Y),u=(0,i.Ps)(a(),s)},96966:function(e,n,t){t.d(n,{Gx:function(){return Z},ZP:function(){return b}});var r=t(72006),i=t(4405),l=t(2272),o=t(74985),a=(t(50959),t(43312)),s=t(17864),u=t(85368),c=t(98269),d=t(39541),p=t(625),f=t(17807),v=t(87076),h=t(45510),m=t(63128),R=t(33137),g=t(61284),w=t(42570),Z=(0,a.iv)([f.gU.filled,d.l0.p(8),d.l0.height(32),{width:"auto"}]),y=(0,a.iv)([d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHighest,d.l0.borderRadius(8),d.l0.p(8),d.l0.height(32)]);function b(e){var n=e.repl,t=e.currentUser,a=e.surface,f=void 0===a||a,b=(0,l.Z)((0,s.lU)(),2),k=b[0],C=b[1].loading,P=(0,o.BX)(o.HY,{children:[(null===t||void 0===t?void 0:t.isVerified)&&(0,o.tZ)(h.zx,{css:[f&&Z],disabled:C,onClick:function(){n.currentUserDidLike||(0,p.j)(p.U3.REACTED_TO_REPL,{replView:"https://replit.com"+n.url,reaction:"heart",isReplTalk:!1,item:"repl",isCommunityPublish:n.wasPosted,isAppPublish:n.wasPublished}),k({variables:{input:{replId:n.id}},optimisticResponse:{__typename:"RootMutationType",toggleReplLike:(0,i.Z)((0,r.Z)({},n),{likeCount:Math.max(0,n.likeCount+(n.currentUserDidLike?-1:1)),currentUserDidLike:!n.currentUserDidLike})}})},iconLeft:n.currentUserDidLike?(0,o.tZ)(w.Z,{}):(0,o.tZ)(c.Z,{}),text:n.likeCount>0?(0,R.d)(n.likeCount):"Like"}),t&&!t.isVerified&&(0,o.BX)(u.G,{css:y,children:[(0,o.tZ)(v.h,{alt:"Verify your email to like",css:f&&Z,disabled:!0,children:(0,o.tZ)(c.Z,{})}),(0,o.tZ)(g.xv,{color:"dimmer",children:(0,R.d)(n.likeCount)})]}),!t&&(0,o.BX)(u.G,{css:y,children:[(0,o.tZ)(v.h,{alt:"Log in to like",css:f&&Z,disabled:!0,children:(0,o.tZ)(c.Z,{})}),(0,o.tZ)(g.xv,{color:"dimmer",children:(0,R.d)(n.likeCount)})]})]});return f?(0,o.tZ)(m.T,{background:"default",css:[d.l0.borderRadius(8)],children:P}):(0,o.tZ)(u.G,{children:P})}},79908:function(e,n,t){t.d(n,{cu:function(){return f},rv:function(){return d}});var r=t(72006),i=t(43119),l=t(71440),o=t(27849),a=t(48017);function s(){var e=(0,i.Z)(["\n  fragment ReplViewReplTitleRepl on Repl {\n    id\n    title\n    iconUrl\n    templateInfo {\n      iconUrl\n    }\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    ...ReplViewReplActionsPermissions\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation ReplViewReplTitleUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplViewReplTitleRepl\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var c={},d=(0,l.Ps)(s(),o.jN),p=(0,l.Ps)(u(),d);function f(e){var n=(0,r.Z)({},c,e);return a.D(p,n)}},37993:function(e,n,t){t.d(n,{Q:function(){return d},r:function(){return p}});var r=t(43119),i=t(71440),l=t(32033),o=t(53743),a=t(17864),s=t(3481);function u(){var e=(0,r.Z)(["\n  fragment ReplViewReplViewerRepl on Repl {\n    id\n    publishedAs\n    runCount\n    publicForkCount\n    releasesForkCount\n    prodUrl: hostedUrl(dotty: true)\n    isProject\n    nextPagePathname\n    lang {\n      id\n      header\n      displayName\n    }\n    ...ReplViewerOutputOverlayRepl\n    ...UseReplViewerRepl\n    ...LikeButtonRepl\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}function c(){var e=(0,r.Z)(["\n  fragment ReplViewReplViewerCurrentUser on CurrentUser {\n    id\n    ...LikeButtonCurrentUser\n    ...CrosisContextCurrentUser\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}var d=(0,i.Ps)(u(),l.sI,o.gh,a.R7),p=(0,i.Ps)(c(),a.wO,s.D)},42861:function(e,n,t){t.d(n,{y6:function(){return un},DZ:function(){return tn},ZP:function(){return cn}});var r=t(57389),i=t(72006),l=t(2272),o=t(74985),a=t(50959),s=t(51631),u=t(82568),c=t(63128),d=t(39541),p=t(85368),f=t(45510),v=t(66016),h=t(32104),m=t(61284),R=t(69849),g=t(8885),w=t(82655),Z=t(87861),y=t(79686),b=t(48306),k=t.n(b),C=t(87978),P=t(18196),U=t(22011),x=t(4421),E=x.j.tabletMin,S=t(57135),T=t(96583),N=t(73194),F=t.n(N),V=t(28737),I=function(){var e=(0,S.Z)((function(){return(0,T.__generator)(this,(function(e){return[2,Promise.all([t.e(6655),t.e(3668)]).then(t.t.bind(t,63668,23)).then((function(e){return e.Excalidraw}))]}))}));return function(){return e.apply(this,arguments)}}(),L=F()(I,{ssr:!1,loading:function(){return null}});function D(e){var n=e.contents,t=e.key,r={scrollToContent:!0};try{r=(0,i.Z)({},r,JSON.parse(n||"{}"))}catch(a){}var l=(0,V.F)().isDarkColorScheme;return(0,o.BX)("div",{className:"jsx-a3a0d25f100f396c excalidraw-repl-view-wrapper",children:[(0,o.tZ)(L,{viewModeEnabled:!0,initialData:r,theme:l?"dark":"light"}),(0,o.tZ)(k(),{id:"a3a0d25f100f396c",children:".excalidraw-repl-view-wrapper{cursor:all-scroll;height:100%;width:100%}.excalidraw-repl-view-wrapper .excalidraw .App-toolbar-content{display:none}"})]},t)}var _=t(91715),A=t.n(_),O=t(86785);function G(e){var n=e.contents,t=e.isKbmsprite,r=a.useRef(null);return a.useEffect((function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var i=JSON.parse(n),l=A()({canvas:e,data:t?(0,O.C)(i):i,readonly:!0});return function(){l.cleanUp()}}}),[n,t]),(0,o.tZ)("canvas",{ref:r,className:"jsx-93826966b3fae22 pedit",children:(0,o.tZ)(k(),{id:"93826966b3fae22",children:".pedit.jsx-93826966b3fae22{width:100%;height:100%}"})})}var B=t(89448);function j(e,n){return(0,i.Z)({},e,n)}var M={isLoading:!1,result:null,error:null,fileViewerType:null};var z=t(88133),X=t(77637),H=t(93483),W=t(64804),q=t(28229);function Y(e){var n=e.code,t=e.fontSize,r=e.hideGutter,i=(0,q.Z)().preferences;return(0,o.tZ)("code",{css:[d.l0.p(4),d.l0.pl(4),d.l0.pr(2),!r&&d.l0.pl(64),d.l0.font.code,d.l0.fontSize(t||d.TV.fontSizeDefault),{lineHeight:d.TV.lineHeightSmall,overflowX:"auto",tabSize:i.indentSize},i.wrapping?{wordBreak:"break-word",whiteSpace:"break-spaces",overflowWrap:"anywhere"}:{whiteSpace:"pre"}],children:n})}function $(e){var n=e.code,t=(0,X.Z)(e,["code"]),r=(0,l.Z)(a.useState(!1),2),s=r[0],u=r[1],c=(0,W.Z)(),d=c.ref,p=c.view;a.useEffect((function(){if(p)return u(!0),function(){return u(!1)}}),[p]),a.useEffect((function(){p&&p.dispatch({changes:{from:0,to:p.state.doc.length,insert:n}})}),[n,p]);var f=!s;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(H.Z,(0,i.Z)({ref:d,css:{height:f?0:"auto"},initialDoc:n,readOnly:!0},t)),f&&(0,o.tZ)(Y,(0,i.Z)({code:n},t))]})}var K=t(79339);function Q(e){var n=e.fs,t=e.deeplink,r=null===t||void 0===t?void 0:t.path,i=function(e){var n=e.fs,t=e.path,r=(0,l.Z)(a.useReducer(j,M),2),i=r[0],o=r[1];return a.useEffect((function(){if(t){var e=!1,r=(0,B.V)(t);return o({isLoading:!0,fileViewerType:r}),n.readFile(t).then((function(n){e||(n.error?o({isLoading:!1,result:null,error:{path:t,fileViewerType:r,error:n.error}}):o({isLoading:!1,result:{path:t,fileViewerType:r,content:n.content},error:null}))})),function(){e=!0}}o(M)}),[n,t]),i}({fs:n,path:r});return(0,o.BX)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]])+" file-viewer",children:[(0,o.BX)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]])+" content",children:[!i.isLoading&&i.result&&i.result.fileViewerType===B.D.Media?(0,o.tZ)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]])+" media",children:(0,o.tZ)(P.A,{content:U.Z.from(i.result.content).toString("base64"),mime:(0,C.yC)(i.result.path)})}):null,i.isLoading&&i.fileViewerType===B.D.Media?(0,o.tZ)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]])+" file-loader",children:(0,o.tZ)(z.Z,{})}):null,!i.isLoading&&i.result&&i.result.fileViewerType===B.D.Markdown?(0,o.tZ)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]])+" markdown",children:(0,o.tZ)(K.Z,{path:i.result.path,source:i.result.content.toString(),fs:n,sourcePos:!1})}):null,i.isLoading&&i.fileViewerType===B.D.Markdown?(0,o.tZ)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]])+" file-loader",children:(0,o.tZ)(z.Z,{})}):null,!i.isLoading&&i.result&&i.result.fileViewerType===B.D.Draw?(0,o.tZ)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]])+" draw",children:(0,o.tZ)(D,{contents:i.result.content.toString()},i.result.path)}):null,i.isLoading&&i.fileViewerType===B.D.Draw?(0,o.tZ)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]])+" file-loader",children:(0,o.tZ)(z.Z,{})}):null,!i.isLoading&&i.result&&i.result.fileViewerType===B.D.Code?(0,o.tZ)($,{filePath:i.result.path,code:i.result.content.toString(),fontSize:14}):null,i.isLoading&&i.fileViewerType===B.D.Code?(0,o.tZ)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]])+" file-loader",children:(0,o.tZ)(z.Z,{})}):null,!i.isLoading&&i.result&&i.result.fileViewerType===B.D.Pedit?(0,o.tZ)(G,{contents:i.result.content.toString(),isKbmsprite:!!(null===r||void 0===r?void 0:r.endsWith(".kbmsprite"))}):null,!i.isLoading&&i.error?(0,o.tZ)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]])+" error",children:(0,o.BX)("div",{className:k().dynamic([["f74f0b1704ced26e",[E]]]),children:["Could not load ",i.error.path]})}):null]}),(0,o.tZ)(k(),{id:"f74f0b1704ced26e",dynamic:[E],children:".file-viewer.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;align:stretch;height:100%;width:100%}.markdown.__jsx-style-dynamic-selector{word-break:break-word;max-width:840px;margin:0 auto;padding:var(--space-16);overflow-y:auto;position:relative;height:100%}.draw.__jsx-style-dynamic-selector{height:100%;width:100%}.file-tree.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);overflow:auto;display:none}.content.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;height:100%;overflow-y:auto;position:relative}.file-loader.__jsx-style-dynamic-selector{width:100%;padding:var(--space-16);position:absolute;top:0;left:0;z-index:100;opacity:0;-webkit-animation:fadeIn ease 0s forwards;-moz-animation:fadeIn ease 0s forwards;-o-animation:fadeIn ease 0s forwards;animation:fadeIn ease 0s forwards;-webkit-animation-delay:200ms;-moz-animation-delay:200ms;-o-animation-delay:200ms;animation-delay:200ms}.media.__jsx-style-dynamic-selector,.error.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@media screen and (min-width:".concat(E,"px){.file-tree.__jsx-style-dynamic-selector{display:block;width:260px}}")})]})}var J=t(10841),ee=t(47067),ne=t(55281),te=t(33137),re=t(4561),ie=t(12583),le=t(61062),oe=t(14260),ae=t(43312),se=t(90686),ue=t(16068),ce=t(27437),de=t(84840),pe=t(81203),fe=t(59253),ve=t(20575),he=t(91926);function me(e){return(0,o.tZ)(ce.D,{children:(0,o.tZ)(Re,(0,i.Z)({},e))})}function Re(e){var n=e.activePath,t=e.fs,r=e.dotReplit,i=e.language,s=e.onNodeClick,u=(0,l.Z)(a.useState(!1),2),c=u[0],f=u[1],v=function(e){var n=e.dotReplit,t=e.language,r=e.areHiddenFilesVisible,i=(0,pe.P)(n);return a.useCallback((function(e){return!!(0,fe.MF)(e)||!r&&((0,fe.uC)(e)||(0,ve.C)(e)||(0,fe.yb)(e,t)||(0,fe.lv)(e,i))}),[t,r,i])}({dotReplit:r,language:i,areHiddenFilesVisible:c}),h=he.Z.getMainFileName(i),R=a.useCallback((function(e,n){return(0,C.x$)(e,n,h)}),[h]);return(0,ce.S)({flags:{flagFiletreeMultiselect:!1},readOnly:!0,activeFile:n,watchDir:t.watchDir,openFile:function(e){return s({path:e,type:re.Tv.File})},shouldHideFile:v,sortNode:R,onError:function(){},onAction:function(){}}),(0,de.Yc)(),(0,o.tZ)(se.i.Provider,{value:{fs:t,uploadFiles:function(){},pendingUploads:[],duplicateFile:(0,S.Z)((function(){return(0,T.__generator)(this,(function(e){return[2]}))}))},children:(0,o.tZ)(oe.Z,{children:(0,o.BX)(p.G,{css:[d.l0.flex.column,d.l0.p(8),(0,ae.iv)({overflow:"auto",height:"100%"})],children:[(0,o.BX)(p.G,{css:[d.l0.rowWithGap(4),d.l0.p(8),d.l0.justify.spaceBetween],children:[(0,o.tZ)(m.h4,{level:3,variant:"subheadDefault",children:"Files"}),(0,o.tZ)(ue.ZP,{actions:[c?ue.st.HideHiddenFiles:ue.st.ShowHiddenFiles],onAction:function(e){switch(e.type){case ue.st.ShowHiddenFiles.type:return void f(!0);case ue.st.HideHiddenFiles.type:f(!1)}}})]}),(0,o.tZ)(le.Z,{siblings:[],readOnly:!0,path:ie.Ql})]})})})}var ge=t(32973),we=t(48468),Ze=t(96966),ye=t(14292),be=t(87076),ke=t(625),Ce=t(48506),Pe=t(69071),Ue=t(81598),xe=t(13233);function Ee(){return Boolean(function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullscreenElement}())}var Se=t(40417),Te=t(40675),Ne=t(20841),Fe=t(18171),Ve=t(17807),Ie=t(43119),Le=t(71440),De=t(93366),_e=t(89649);function Ae(){var e=(0,Ie.Z)(["\n  query TotalTipsRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        user {\n          ... on User {\n            id\n            username\n            ...IsTippingAvailableForRecipient\n          }\n        }\n        totalCyclesTips\n      }\n    }\n    currentUser {\n      id\n      ...IsTippingAvailableForSender\n    }\n  }\n  ","\n  ","\n"]);return Ae=function(){return e},e}var Oe={},Ge=(0,Le.Ps)(Ae(),De.R1,De.rd);var Be=t(39902),je=t(73853),Me=t(34338);function ze(e){var n,t=e.repl,l=function(e){var n=(0,i.Z)({},Oe,e);return _e.a(Ge,n)}({variables:{id:t.id}}),a=l.data;if(l.loading)return null;var s="CurrentUser"===(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.__typename)?a.currentUser:null,u="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null;return(0,je.L)({replOwner:null===u||void 0===u?void 0:u.user,currentUser:s})&&u?(0,o.tZ)(c.T,{background:"default",css:[d.l0.borderRadius(8),(0,r.Z)({},(0,Me.EM)("mobileMax"),[d.l0.display.none])],children:(0,o.tZ)(f.zx,{css:[Ve.gU.filled,d.l0.p(8),{width:"auto"}],onClick:function(){(0,ke.j)(ke.U3.TIP_USED,{action:"total-tips-button-clicked",repl:t.url,item:"repl"});var e=document.getElementById("tips");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},iconLeft:(0,o.tZ)(Be.Z,{}),text:"".concat((0,te.d)(u.totalCyclesTips||0)," tips")})}):null}var Xe=t(90171),He=t(77511),We=t(69341),qe=t(67121),Ye=t(87138),$e=t(29203),Ke=t(1809),Qe="1px solid "+d.TV.outlineDimmer,Je=(0,u.X)({loadingIconContainer:[d.l0.center,d.l0.width("100%"),d.l0.height("100%")]});function en(e){var n=e.children;return(0,o.tZ)(p.G,{tag:"header",css:[{borderBottom:Qe},d.l0.p(8),d.l0.rowWithGap(8),d.l0.align.center],children:n})}var nn=p.K.a;function tn(e){var n=e.runCount,t=e.runState,r=e.connectionState,l=e.run,a=e.stop,u=e.publishedAs,c=t===J.A.RUNNING?(0,o.tZ)(ee.Z,{fill:"currentColor"}):(0,o.tZ)(v.Z,{fill:"currentColor"}),h=u===s.O2.Template?"Run example":"Run",m=r===Z.em.CONNECTING;return t===J.A.RUNNING&&(h="Stop"),m&&(h="Loading..."),(0,o.tZ)(p.G,{css:[d.l0.rowWithGap(8),d.l0.align.center],children:(0,o.tZ)(f.zx,(0,i.Z)({colorway:t===J.A.RUNNING||r===Z.em.CONNECTING||u===s.O2.Template?void 0:"positive",dataCy:"repl-viewer-run-button",disabled:m,onClick:function(){switch(t){case J.A.IDLE:case J.A.OFFLINE:l();break;case J.A.RUNNING:a()}},iconLeft:c,text:h},n>0&&{secondaryText:(0,te.d)(n)}))})}function rn(e){var n=e.innerRef,t=e.children;return(0,o.tZ)(c.T,{elevated:!0,css:[{border:Qe},d.l0.borderRadius(8),d.l0.overflow("hidden")],innerRef:n,children:t})}function ln(e){var n=e.src;return(0,o.tZ)(p.G,{css:[d.l0.width("100%"),d.l0.height("100%")],children:(0,o.tZ)(p.G,(0,i.Z)({tag:"iframe",src:n,css:[d.l0.width("100%"),d.l0.height("100%"),{position:"absolute",backgroundColor:"white",display:"block",border:"none",top:0,left:0}]},Ne.Z))})}function on(e){var n=e.fs,t=e.dotReplit,r=e.isOpen,i=e.language,l=e.activePath,a=e.onNodeClick;return(0,o.tZ)(p.G,{css:[{zIndex:101,position:"absolute",top:0,left:0,height:"100%",overflow:"hidden"},!r&&{pointerEvents:"none"}],children:(0,o.tZ)(c.T,{elevated:!0,css:[{height:"100%",width:200,transition:"transform ".concat(160,"ms"),transform:"translateX(".concat(r?0:-200,"px)"),borderRight:"solid 1px var(--outline-dimmer)"}],children:(0,o.tZ)(me,{fs:n,dotReplit:t,language:i,activePath:l,onNodeClick:a})})})}var an=p.K.div;function sn(e){var n=e.repl,t=e.currentUser,i=e.enableDeeplinks,s=e.isFromProfile,u=e.hideTotalTips,v=e.hideLike,h=(0,w.Z)({enableDeeplinks:Boolean(i),repl:n,currentUser:t}),R=h.openFile,Z=h.viewState,y=h.fs,b=h.dotReplit,k=h.runRepl,C=h.stopRepl,P=h.runState,U=h.connectionState,E=h.bsodId,S=h.isFileTreeOpen,T=h.setIsFileTreeOpen,N=h.showUrlOutput,F=h.nonBsodUnrecoverableError,V=a.useRef(null),I=(0,xe.Z)().showError,L=(0,Xe.useRouter)(),D=function(){var e=(0,l.Z)(a.useState(Ee()),2),n=e[0],t=e[1];return a.useEffect((function(){var e=function(){t(Ee())};return document.addEventListener("fullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e)}})),n}(),_="code"===(null===Z||void 0===Z?void 0:Z.type)&&Z.deeplink,A=(0,l.Z)(a.useState(_?_.path:null),2),O=A[0],G=A[1];(0,a.useEffect)((function(){G(_?_.path:null)}),[_,null===Z||void 0===Z?void 0:Z.type]);var B=!v&&!(0,He.Vg)(L),j=!u&&!(0,He.Vg)(L);return E?(0,o.tZ)(g.Z,{}):F===qe.G.NotAllowed?(0,o.tZ)(Ye.Z,{isOpen:!0}):(0,o.tZ)(We.Z,{bsod:!0,origin:"replView: ErrorBoundary",children:(0,o.BX)(rn,{innerRef:V,children:[(0,o.BX)(en,{children:[(0,o.BX)(p.G,{css:[d.l0.flex.growAndShrink(1),d.l0.rowWithGap(8)],children:[(0,o.BX)(p.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:[(0,o.tZ)(f.zx,{iconLeft:(0,o.tZ)(Ke.Z,{}),text:S?"Hide code":"Show code",onClick:function(){return T((function(e){return!e}))},css:(0,r.Z)({},"@media (max-width: ".concat(x.j.mobileMax,"px)"),{display:"none"})}),(0,o.tZ)(c.T,{background:"default",css:[d.l0.borderRadius(8),(0,r.Z)({},"@media (min-width: ".concat(x.j.mobileMax+1,"px)"),{display:"none"})],children:(0,o.tZ)(be.h,{css:Ze.Gx,alt:S?"Hide files":"Show files",onClick:function(){return T((function(e){return!e}))},children:(0,o.tZ)(ye.Z,{})})})]}),N||"server"===(null===Z||void 0===Z?void 0:Z.type)?(0,o.tZ)(p.G,{css:[d.l0.center],onClick:function(){(0,ke.j)(ke.U3.COVER_PAGE_NEW_TAB_OPENED,{source:s?"profilePage":"coverPage"})},children:(0,o.BX)(nn,{css:[d.l0.rowWithGap(4),d.l0.color.foregroundDimmer,d.l0.px(4),d.l0.align.center,d.l0.focusRing,d.l0.borderRadius(8),d.l0.p(8),{transition:"color 120ms ease-out",":hover":{color:d.TV.foregroundDefault}}],href:n.prodUrl,target:"_blank",children:[(0,o.tZ)(ge.Z,{}),(0,o.tZ)(m.xv,{height:"singleLine",children:(0,o.tZ)("span",{css:(0,r.Z)({},"@media (max-width: ".concat(x.j.mobileMax+20,"px)"),{display:"none"}),children:"Open website"})})]})}):null]}),(0,o.BX)(p.G,{css:[d.l0.rowWithGap(8),d.l0.align.center],children:[V.current&&document.fullscreenEnabled?(0,o.tZ)(be.h,{alt:D?"Exit fullscreen":"Enter fullscreen",css:Ze.Gx,onClick:function(){var e=V.current;e?D?function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozExitFullScreen?e.mozExitFullScreen():e.webkitExitFullScreen&&e.webkitExitFullScreen()}():(!function(e){var n=e;n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen&&n.webkitRequestFullScreen()}(e),(0,ke.j)(ke.U3.REPL_VIEWER_FULLSCREEN_ENTERED,{location:s?"profile":"coverpage"})):I("Failed to enter fullscreen mode")},children:D?(0,o.tZ)(Ue.Z,{}):(0,o.tZ)(Pe.Z,{})}):null,j?(0,o.tZ)(ze,{repl:n}):null,B?(0,o.tZ)(Ze.ZP,{repl:n,currentUser:t}):null,(0,o.tZ)(tn,{runCount:n.runCount,runState:P,connectionState:U,publishedAs:n.publishedAs,run:k,stop:C})]})]}),(0,o.tZ)(un,{repl:n,runRepl:k,viewState:Z,connectionState:U,activePath:O,isFileTreeOpen:S,setIsFileTreeOpen:T,openFile:R,fs:y,dotReplit:b})]})})}function un(e){var n=e.repl,t=e.runRepl,r=e.viewState,i=e.connectionState,l=e.activePath,s=e.isFileTreeOpen,u=e.setIsFileTreeOpen,c=e.openFile,f=e.fs,v=e.dotReplit,g=(0,a.useState)(!1),w=g[0],b=g[1],k=(0,we.Z)((function(e){void 0!==e.width&&b(e.width<=500)})),C=i===Z.em.CONNECTING&&!s,P=(0,o.BX)(o.HY,{children:[null===r?(0,o.tZ)(R.Z,{repl:n,onClick:t}):null,"server"===(null===r||void 0===r?void 0:r.type)?(0,o.tZ)(ln,{src:r.previewUrl}):null,"vnc"===(null===r||void 0===r?void 0:r.type)?(0,o.tZ)(y.Z,{fs:r.fs,container:r.container}):null,"deprecationNotice"===(null===r||void 0===r?void 0:r.type)?(0,o.BX)(p.G,{css:[d.l0.center,d.l0.p(16),d.l0.height("100%")],children:[(0,o.BX)(m.xv,{multiline:!0,variant:"subheadDefault",children:['Running "',n.lang.displayName,'" is no longer supported.'," "]}),(0,o.tZ)(Se.Z,{feature:Te.l.General})]}):null,"terminal"===(null===r||void 0===r?void 0:r.type)?(0,o.tZ)(p.G,{css:[d.l0.height("100%"),d.l0.width("100%"),d.l0.position.relative,{overflow:"hidden"}],children:(0,o.tZ)(ne.Z,{packager:r.packager,runner:r.runner,openFile:c,listFiles:f.listFiles})}):null,"code"===(null===r||void 0===r?void 0:r.type)?(0,o.tZ)(p.G,{css:[d.l0.height("100%"),d.l0.flex.growAndShrink(1),{position:"relative",overflow:"hidden",transition:"margin ".concat(160,"ms"),marginLeft:s&&!w?200:0}],onClick:function(){w&&u(!1)},children:(0,o.tZ)(Q,{fs:r.fs,deeplink:r.deeplink})}):null]});return(0,o.BX)(an,{ref:function(e){k(e)},css:[d.l0.flex.growAndShrink(1),{position:"relative"}],children:[C?(0,o.tZ)(p.G,{css:Je.loadingIconContainer,children:(0,o.tZ)(h.Z,{})}):P,(0,o.tZ)(on,{isOpen:s,language:n.lang.id,activePath:l,onNodeClick:function(e){e.type!==re.Tv.Directory&&(c({path:e.path}),w&&u(!1))},fs:f,dotReplit:v})]})}function cn(e){var n=e.repl,t=e.currentUser,r=e.enableDeeplinks,i=e.isFromProfile,l=e.hideTotalTips,s=e.hideLike,u=(0,a.useState)(!1),c=u[0],d=u[1];(0,a.useEffect)((function(){return d(!0)}),[]);var p=(0,Fe.Z)((function(){return{id:n.id,slug:n.slug,language:n.language}}),[n.id,n.language,n.slug]);return c?(0,o.tZ)(Ce.Z.Provider,{value:p,children:(0,o.tZ)($e.S2,{children:(0,o.tZ)(sn,{isFromProfile:i,repl:n,currentUser:t,enableDeeplinks:r,hideTotalTips:l,hideLike:s})})}):(0,o.tZ)(rn,{})}},53743:function(e,n,t){t.d(n,{gh:function(){return d},yo:function(){return f}});var r=t(72006),i=t(43119),l=t(71440),o=t(3481),a=t(48017);function s(){var e=(0,i.Z)(["\n  fragment UseReplViewerRepl on Repl {\n    id\n    previewUrl: hostedUrl(dotty: false, dev: false)\n    url\n    wasPosted\n    wasPublished\n    publishedAs\n    isProject\n    lang {\n      id\n      canUseShellRunner\n    }\n    config {\n      isServer\n      isVnc\n    }\n    deployment {\n      id\n      activeRelease {\n        id\n        previewUrl: hostedUrl\n      }\n    }\n    replViewSettings {\n      id\n      defaultView\n      replFile\n    }\n    ...CrosisContextRepl\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation UserReplViewCreateReplRun($replId: String!) {\n    createReplRun(replId: $replId) {\n      ... on Repl {\n        id\n        runCount\n      }\n    }\n  }\n"]);return u=function(){return e},e}var c={},d=(0,l.Ps)(s(),o.C),p=(0,l.Ps)(u());function f(e){var n=(0,r.Z)({},c,e);return a.D(p,n)}},82655:function(e,n,t){t.d(n,{Z:function(){return I}});var r=t(57135),i=t(2272),l=t(96583),o=t(50959),a=t(51631),s=t(53743),u=t(49747),c=t(87861),d=t(10841),p=t(43694),f=t(20593),v=t(72860),h=t(22946),m=t(91926),R=function(){var e=(0,r.Z)((function(e,n){var t,r,i,o;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return(t=e.getContext())?m.Z.supportsPackager3(t.repl.language)?[2,!0]:t.repl.language.startsWith("nix")?[4,n.getConfig()]:[3,2]:[2,!1];case 1:if(null===(o=l.sent().config)||void 0===o||null===(r=o.packager)||void 0===r||null===(i=r.features)||void 0===i?void 0:i.guessImports)return[2,!0];l.label=2;case 2:return[2,!1]}}))}));return function(n,t){return e.apply(this,arguments)}}(),g=R,w=t(10702),Z=t(5218);var y=t(625),b=t(69834),k=t(4561),C=".lesson/lessonplan.md";function P(e){var n=e.fs,t=e.container,r=e.dotReplit,l=e.skip,a=e.preferredFile,s=(0,i.Z)(o.useState(null),2),u=s[0],d=s[1],p=function(e){var n,t=(0,i.Z)(o.useState(null===(n=e.getContext())||void 0===n?void 0:n.repl.id),2),r=t[0],l=t[1];return o.useEffect((function(){return e.onConnectionStateChanged((function(n){var t;n===c.em.CONNECTING&&l(null===(t=e.getContext())||void 0===t?void 0:t.repl.id)}))}),[e]),r}(t);return o.useEffect((function(){if(!l&&p){var e=!1;return Promise.all([(0,b.W)({replId:p,dotReplit:r,fs:n}),"LessonPlan"===(null===a||void 0===a?void 0:a.type)?n.stat(C):null,"FilePath"===(null===a||void 0===a?void 0:a.type)?n.stat(a.path):null]).then((function(n){var t=(0,i.Z)(n,3),r=t[0],l=r.entrypoint,o=r.readmeFile,s=t[1],u=t[2];e||("LessonPlan"===(null===a||void 0===a?void 0:a.type)&&s&&s.exists&&s.type===k.Tv.File?d(C):"FilePath"===(null===a||void 0===a?void 0:a.type)&&u&&u.exists&&u.type===k.Tv.File?d(a.path):"Readme"===(null===a||void 0===a?void 0:a.type)&&o?d(o):l&&d(l))})),function(){e=!0}}}),[n,r,p,l,a]),u}var U=t(90171),x=t.n(U);var E,S=t(13424),T=t(13233),N=t(45344),F=t(29838),V=t(5993);function I(e){var n,t,m=e.currentUser,R=e.repl,b=e.initialViewMode,k=e.enableDeeplinks,C=(0,o.useState)(null),U=C[0],I=C[1],L=(0,i.Z)((0,S.qg)(),2),D=L[0],_=L[1],A=(0,S.ic)(),O=(0,o.useState)(c.em.DISCONNECTED),G=O[0],B=O[1],j=(0,T.Z)().showError,M=(0,o.useState)(d.A.OFFLINE),z=M[0],X=M[1],H=(0,o.useState)((function(){return function(e){var n=e.onUnrecoverableError,t=(0,c.ZP)({onUnrecoverableError:n}),i=(0,f.Z)({container:t}),o=(0,w.Z)({container:t,fs:i}),a=(0,h.Z)({container:t,dotReplit:o}),s=(0,Z.Z)({container:t,dotReplit:o}),u=(0,v.Z)({container:t,toolchain:s,mode:"shellrunner",beforeRun:(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return[4,g(t,o)];case 1:return e.sent()?[4,a.installPackages()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))});return{container:t,fs:i,runner:u,dotReplit:o,packager:a}}({onUnrecoverableError:(0,N.Z)({origin:"replView: useReplViewer/services/onUnrecoverableError",onNonBsodUnrecoverableError:function(e){I(e)},throwBsod:_})})})),W=H[0],q=W.container,Y=W.fs,$=W.dotReplit,K=W.runner,Q=W.packager,J=(0,o.useRef)((0,u.u9)()),ee=(null===(n=R.replViewSettings)||void 0===n?void 0:n.defaultView)===a.dZ.ReplFile&&R.replViewSettings.replFile?R.replViewSettings.replFile:void 0,ne={type:"Readme"};R.isProject?ne={type:"LessonPlan"}:ee&&(ne={type:"FilePath",path:ee});var te=b===E.Code||J.current||ee||(null===(t=R.replViewSettings)||void 0===t?void 0:t.defaultView)!==a.dZ.ReplImage&&(R.publishedAs===a.O2.Template||R.isProject),re=(0,o.useState)((function(){return te?{type:"code",fs:Y,container:q,dotReplit:$}:null})),ie=re[0],le=re[1],oe=(0,o.useState)(J.current),ae=oe[0],se=oe[1],ue=(0,i.Z)(o.useState(null),2),ce=ue[0],de=ue[1];(0,F.Z)((function(){"code"===(null===ie||void 0===ie?void 0:ie.type)&&(0,y.j)(y.U3.COVER_PAGE_SOURCE_VIEWED)}),[null===ie||void 0===ie?void 0:ie.type]);var pe=Boolean("code"===(null===ie||void 0===ie?void 0:ie.type)&&!ie.deeplink&&!J.current),fe=P({fs:Y,dotReplit:$,container:q,preferredFile:ne,skip:!pe});!function(e){var n=e.currentDeeplink,t=e.onChange,i=e.fs,a=e.enabled,s=(0,o.useRef)(!1),c=(0,o.useCallback)((0,r.Z)((function(){var e,n,r,o;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return s.current?[2]:[4,(0,u.mv)(i)];case 1:return e=l.sent(),n=e.path,r=e.line,o=e.col,n?(t({path:n,line:r,col:o}),[2]):(t(null),[2])}}))})),[i,t]),d=(0,o.useState)(!1),p=d[0],f=d[1];(0,o.useEffect)((function(){p||c().then((function(){return f(!0)}))})),(0,o.useEffect)((function(){if(a)return window.addEventListener("hashchange",c),function(){window.removeEventListener("hashchange",c)}}),[a,c]),(0,o.useEffect)((function(){if(a&&n){var e=(0,u.YM)(n),t=x().asPath;try{t=window.decodeURI(t)}catch(i){}if(!t.endsWith(e)){var r=x().asPath.includes("#")?x().asPath.slice(0,x().asPath.indexOf("#")):x().asPath;s.current=!0,x().push({pathname:x().pathname,query:x().query},"".concat(r).concat(e),{shallow:!0}),s.current=!1}}}),[i,n,a])}({fs:Y,currentDeeplink:"code"===(null===ie||void 0===ie?void 0:ie.type)?ie.deeplink:void 0,onChange:function(e){le(te||e?{deeplink:null!==e&&void 0!==e?e:void 0,type:"code",container:q,fs:Y,dotReplit:$}:null)},enabled:k});var ve=(0,i.Z)((0,s.yo)({variables:{replId:R.id}}),1)[0];(0,o.useEffect)((function(){if((0,u.u9)()){var e=!1;return(0,u.mv)(Y).then((function(n){var t=n.path,r=n.line,i=n.col;e||t&&le({type:"code",container:q,fs:Y,dotReplit:$,deeplink:{path:t,line:r,col:i}})})),function(){e=!0}}}),[q,Y,$]),(0,o.useEffect)((function(){pe&&fe&&le({type:"code",container:q,fs:Y,dotReplit:$,deeplink:{path:fe}})}),[pe,fe,q,Y,$]),(0,o.useEffect)((function(){ce&&le("server"!==ce?{type:"vnc",container:q,fs:Y}:{type:"server",previewUrl:R.previewUrl})}),[q,Y,ce,R.previewUrl]),(0,o.useEffect)((function(){G!==c.em.CONNECTED&&de(null)}),[G]);var he=(0,p.b)({repl:R,currentUser:m}),me=function(e){return!!["html","web_project","kaboom"].includes(e.lang.id)||Boolean(e.config.isServer)}(R),Re=ae||Boolean(ie&&("code"===ie.type||"vnc"===ie.type||"terminal"===ie.type)),ge=(0,V.S)();(0,o.useEffect)((function(){if(Re&&he&&q.getConnectionState()===c.em.DISCONNECTED){q.connect({context:he,getMinimumRetryDelayMs:ge});var e=me?[q.close]:[K.onStateChanged(X),q.onConnectionStateChanged(B),q.onPortOpened((function(e){var n=e.isVnc;de(n?"vnc":"server")})),q.close];return function(){e.forEach((function(e){return e()}))}}}),[Re,q,K,he,me]);var we=(0,o.useRef)(!1);return(0,o.useEffect)((function(){function e(){return(e=(0,r.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:if(z!==d.A.IDLE)return[2];if(!we.current)return[2];if(we.current=!1,"terminal"!==(null===ie||void 0===ie?void 0:ie.type))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,K.run()];case 2:return n.sent(),[3,4];case 3:if(e=n.sent(),!e.toString().includes("Cannot run while state is not IDLE or STOPPING, got state: ".concat(d.A.OFFLINE)))throw e;return j("You are offline. Please check your internet connection."),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[z,ie,K,j]),{fs:Y,dotReplit:$,openFile:function(e){"server"===(null===ie||void 0===ie?void 0:ie.type)&&X(d.A.IDLE),le({type:"code",container:q,fs:Y,deeplink:e,dotReplit:$}),K.getRunState()===d.A.RUNNING&&K.stopRun()},viewState:ie,runRepl:function(){if(se(!1),m&&ve(),(0,y.j)(y.U3.REACTED_TO_REPL,{replView:"https://replit.com"+R.url,reaction:"repl_ran",isReplTalk:!1,item:"repl",isCommunityPublish:R.wasPosted,isAppPublish:R.wasPublished}),me){var e,n,t=(null===(e=R.deployment)||void 0===e||null===(n=e.activeRelease)||void 0===n?void 0:n.previewUrl)||R.previewUrl;return le({type:"server",previewUrl:t}),void X(d.A.RUNNING)}if(R.lang.canUseShellRunner)return le("server"===ce?{type:"server",previewUrl:R.previewUrl}:"vnc"===ce?{type:"vnc",container:q,fs:Y}:{type:"terminal",runner:K,packager:Q}),K.getRunState()!==d.A.IDLE?void(we.current=!0):void K.run();le({type:"deprecationNotice"})},stopRepl:function(){le(null),se(!1),X(d.A.IDLE),me||K.getRunState()===d.A.RUNNING&&K.stopRun()},runState:z,isFileTreeOpen:ae,setIsFileTreeOpen:se,bsodId:null===D||void 0===D?void 0:D.eventId,nonBsodUnrecoverableError:U,showUrlOutput:me,connectionState:G,devClearBsod:function(){A()}}}!function(e){e.Code="Code",e.Output="Output"}(E||(E={}))}}]);
//# sourceMappingURL=9931-f4182bfd522e1236.js.map